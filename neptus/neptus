#!/usr/bin/env bash
#############################################################################
# Copyright (c) 2004-2020 Universidade do Porto - Faculdade de Engenharia   #
# Laboratório de Sistemas e Tecnologia Subaquática (LSTS)                   #
# All rights reserved.                                                      #
# Rua Dr. Roberto Frias s/n, sala I203, 4200-465 Porto, Portugal            #
#                                                                           #
# This file is part of Neptus, Command and Control Framework.               #
#                                                                           #
# Commercial Licence Usage                                                  #
# Licencees holding valid commercial Neptus licences may use this file      #
# in accordance with the commercial licence agreement provided with the     #
# Software or, alternatively, in accordance with the terms contained in a   #
# written agreement between you and Universidade do Porto. For licensing    #
# terms, conditions, and further information contact lsts@fe.up.pt.         #
#                                                                           #
# Modified European Union Public Licence - EUPL v.1.1 Usage                 #
# Alternatively, this file may be used under the terms of the Modified EUPL,#
# Version 1.1 only (the "Licence"), appearing in the file LICENCE.md        #
# included in the packaging of this file. You may not use this  work        #
# except in compliance with the Licence. Unless required by  applicable     #
# law or agreed to in writing, software distributed under the Licence  is   #
# distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF      #
# ANY KIND, either express or implied. See the Licence for the specific     #
# language governing permissions and limitations at                         #
# https://github.com/LSTS/neptus/blob/develop/LICENSE.md                    #
# and http://ec.europa.eu/idabc/eupl.html.                                  #
#                                                                           #
# For more information please see <http://lsts.fe.up.pt/neptus>.            #
#############################################################################
# Author: Paulo Dias, José Pinto                                            #
#############################################################################

##  neptus start up script for UN*X

if [ -z "$BASH" ]
then
  bash $0 $@
fi

PROGNAME=$0

function command_exists {
  type "$1" &> /dev/null
}

unameOut="$(uname -s)"
case "${unameOut}" in
    Darwin*)    SHELL_DIR=`dirname $PROGNAME`;
                echo "MacOS found!";;
    *)          if command_exists readlink; then
                  SHELL_DIR=`dirname $(readlink -f $PROGNAME)`
                  echo "Readlink found!"
                else
                  SHELL_DIR=`dirname $PROGNAME`
                  echo "No readlink found!"
                fi
esac

cd "$SHELL_DIR/" > /dev/null
APP_HOME="$(pwd -P)"
#cd "$SHELL_DIR" >/dev/null

APP_NAME="neptus"
APP_BASE_NAME=$(basename "$0")

# Add default JVM options here. You can also use JAVA_OPTS and NEPTUS_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xms10m" "-Xmx2g" "-XX:MaxMetaspaceSize=512m" "-XX:+UseG1GC" "-XX:+HeapDumpOnOutOfMemoryError" "-XX:HeapDumpPath=\$APP_HOME/log/heap-dump.hprof" "-Xss256k"'

DEFAULT=pt.lsts.neptus.loader.NeptusMain

CLASSPATH="$APP_HOME:$APP_HOME/bin/neptus.jar:$APP_HOME/conf:$APP_HOME/lib/libimc.jar:$APP_HOME/lib/libMsgSender.jar:$APP_HOME/lib/aisparser-2.0.0.jar:$APP_HOME/lib/jssc.jar:$APP_HOME/lib/ais-contact-manager-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-gui-util/1.7/b089f5b710e29d0d4280401d04fd4f086fbef2a7/batik-gui-util-1.7.jar:$APP_HOME/lib/charsets-zip.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-cli/commons-cli/1.2/2bf96b7aa8b611c177d329452af1dc933e14501c/commons-cli-1.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-httpclient/commons-httpclient/3.1/964cd74171f427720480efdec40a7c7f6e58426a/commons-httpclient-3.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.firebase/firebase-client-jvm/2.0.0/aece95b2ae6faea053969f8990e108c66b7c66b0/firebase-client-jvm-2.0.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.firebase/tubesock/0.0.9/c1f56c0f1a75ced73ad50c47fb3f702009e3960a/tubesock-0.0.9.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/edu.ucar/cdm-core/5.2.0/4b7d4f80d376cbf9bf8f4b5266846a80fdb584ec/cdm-core-5.2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/edu.ucar/httpservices/5.2.0/103a5a824f45a38c9c6a08996ea231717de9ff07/httpservices-5.2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpmime/4.5.9/c5302bb51f3316b96c0111254ce26994358fb1cc/httpmime-4.5.9.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpclient/4.5.9/a25c1be5ce99d0ce99aa43eb982868c796dd0775/httpclient-4.5.9.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-codec/commons-codec/1.11/3acb4705652e16236558f0f4f2192cc33c3bd189/commons-codec-1.11.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-collections/commons-collections/3.2.1/761ea405b9b37ced573d2df0d1e3a4e0f9edc668/commons-collections-3.2.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-compress/1.10/5eeb27c57eece1faf2d837868aeccc94d84dcc9a/commons-compress-1.10.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-configuration/commons-configuration/1.10/2b36e4adfb66d966c5aef2d73deb6be716389dc9/commons-configuration-1.10.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-email/1.3.2/c15fb9942ec8cafc605a02c774aa0766d52740a/commons-email-1.3.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/fop/0.95/57741be654e41242eecfa8f9a9f8e2a367ce262d/fop-0.95.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.jchart2d/jchart2d/3.3.2/4950821eefe4c204903e68b4d45a558b5ebdd6fa/jchart2d-3.3.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/xmlgraphics-commons/1.3.1/f7d0fa54e2750acd82b1a241c043be6fce1bf0dc/xmlgraphics-commons-1.3.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-io/commons-io/2.4/b1b6ea3b7e4aa4f492509a4952029cd8e48019ad/commons-io-2.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dk.dma.ais.lib/ais-lib-messages/2.4/5ad780a88cde4dbbfd0ac898b27d941dd1e31df1/ais-lib-messages-2.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dk.dma.commons/dma-commons-util/0.5/d65a979ff1758a161641535b75a16be8e998bdbc/dma-commons-util-0.5.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-lang3/3.2.1/66f13681add50ca9e4546ffabafaaac7645db3cf/commons-lang3-3.2.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-lang/commons-lang/2.6/ce1edb914c94ebc388f086c6827e8bdeec71ac2/commons-lang-2.6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/commons-net/commons-net/3.3/cd0d5510908225f76c5fe5a3f1df4fa44866f81e/commons-net-3.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jaxen/jaxen/1.1.1/9f5d3c5974dbe5cf69c2c2ec7d8a4eb6e0fce7f9/jaxen-1.1.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dom4j/dom4j/1.6.1/5d3ccc056b6f056dbf0dddfdf43894b9065a8f94/dom4j-1.6.1.jar:$APP_HOME/lib/foxtrot.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.graphstream/gs-ui/1.3/52201fec50f42838668c77d9e1e15bf06ccad73c/gs-ui-1.3.jar:$APP_HOME/lib/gdal.jar:$APP_HOME/lib/gpsinput-0.5.3.jar:$APP_HOME/lib/gpxparser.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy/2.5.4/86b94e2949bcff3a13b7ad200e4c5299b52ad994/groovy-2.5.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.code.gson/gson/2.2.2/1f96456ca233dec780aa224bff076d8e8bca3908/gson-2.2.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.reflections/reflections/0.9.9/296d8adb2f22a38025f44b45cac89835ff0bbaf/reflections-0.9.9.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.guava/guava/28.0-jre/54fed371b4b8a8cce1e94a9abd9620982d3aa54b/guava-28.0-jre.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/de.grundid.opendatalab/geojson-jackson/1.14/6511c788061c43f92b84491e2da89fe3ab498079/geojson-jackson-1.14.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.imgscalr/imgscalr-lib/4.2/e2838f7119361511ef7d54fe0d502bf07f3325eb/imgscalr-lib-4.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.ini4j/ini4j/0.5.2/16561cb11c221b5928119e10d7636c95ee5c960d/ini4j-0.5.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.lowagie/itext/2.1.5/a25c4c425ebf812c65184e81d4c84d22e8641b35/itext-2.1.5.jar:$APP_HOME/lib/j3dcore.jar:$APP_HOME/lib/j3dutils.jar:$APP_HOME/lib/StarfireExt.jar:$APP_HOME/lib/vecmath.jar:$APP_HOME/lib/wrl/j3d-vrml97.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/gov.nist.math/jama/1.0.2/3fa44a5491e483b875e60e9a69ffda7fd2b72627/jama-1.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/de.micromata.jak/JavaAPIforKml/2.2.0/c8b0219444ab0e8f32f2ca28ae4373e3e6153e05/JavaAPIforKml-2.2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sourceforge.javacsv/javacsv/2.0/8092b1ba2d4929f2ec27e58cd240502afdd6a9a7/javacsv-2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.javassist/javassist/3.18.2-GA/1180a90fbad732b60fb728a6bbe8fcb3151423d7/javassist-3.18.2-GA.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jfree/jcommon/1.0.24/d5016f7703896c38f9e511f8a9edda2585cbac8b/jcommon-1.0.24.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.mortbay.jetty/jetty/6.0.2/2f6a0ac98be57c651d7ab4ff43f01196a56653f6/jetty-6.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.graphstream/gs-algo/1.3/3a231ad575cf6519d8aa7712aa51fd118c04ee88/gs-algo-1.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jfree/jfreechart/1.5.0/bc7919249bac68c15c433ed51cb798a1bf8cd74e/jfreechart-1.5.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.jgoodies/jgoodies-looks/2.5.3/b8c145a7045f841bf8f9a3bcf600c7e19593e1d7/jgoodies-looks-2.5.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.jhlabs/filters/2.0.235-1/fff65ebe39d1097cee431087858b3caf957ecfb7/filters-2.0.235-1.jar:$APP_HOME/lib/jinput.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sourceforge.jmatio/jmatio/1.0/df72993ea17d34c3bacd983558d2970a866abaf6/jmatio-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.media/jmf/2.1.1e/fe9287a362578bfb8b7b9dba42af0ec80a297abb/jmf-2.1.1e.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all-main/2.0.2/6a86a9ce357c085e3052efcf639447f9957b82b8/jogl-all-main-2.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.jcraft/jsch/0.1.53/658b682d5c817b27ae795637dfec047c63d29935/jsch-0.1.53.jar:$APP_HOME/lib/jtransform_thin.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.jung/jung-visualization/2.0.1/128430bd695571135c038c86541fc21129416584/jung-visualization-2.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.jung/jung-algorithms/2.0.1/bc6983fcf65c451eedd5080795ef481fcf84b509/jung-algorithms-2.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.jung/jung-graph-impl/2.0.1/37e4cbe198ca7ffd2238ebfee8c5d84d6d79e1c2/jung-graph-impl-2.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.jung/jung-api/2.0.1/843d5ccb44dd310ed0e36cb9b776baa0391515a2/jung-api-2.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.swinglabs/jxlayer/3.0.2/e134070556d7723fa26b70d1e83a62af02dba478/jxlayer-3.0.2.jar:$APP_HOME/lib/jogl2/gluegen.jar:$APP_HOME/lib/jogl2/jogl-all.jar:$APP_HOME/lib/jogl2/gluegen-rt.jar:$APP_HOME/lib/jogl2/jogl-all-natives-linux-amd64.jar:$APP_HOME/lib/jogl2/gluegen-rt-natives-linux-amd64.jar:$APP_HOME/lib/jogl2/jogl-all-natives-linux-i586.jar:$APP_HOME/lib/jogl2/gluegen-rt-natives-linux-i586.jar:$APP_HOME/lib/jogl2/jogl-all-natives-macosx-universal.jar:$APP_HOME/lib/jogl2/gluegen-rt-natives-macosx-universal.jar:$APP_HOME/lib/jogl2/jogl-all-natives-windows-amd64.jar:$APP_HOME/lib/jogl2/gluegen-rt-natives-windows-amd64.jar:$APP_HOME/lib/jogl2/jogl-all-natives-windows-i586.jar:$APP_HOME/lib/jogl2/gluegen-rt-natives-windows-i586.jar:$APP_HOME/lib/jogl2/org.jzy3d-0.9.jar:$APP_HOME/lib/l2fprod-common-all.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/log4j/log4j/1.2.17/5af35056b4d257e4b64b9e8069c0746e8b08629f/log4j-1.2.17.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sf.marineapi/marineapi/0.11.0/668e7c8310269489019117307889a18ef65a9187/marineapi-0.11.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.drewnoakes/metadata-extractor/2.11.0/5f11883f6d06a16ca5fb8a9edf7c6c1237a92da0/metadata-extractor-2.11.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.miglayout/miglayout-swing/4.2/ca85067488e79a2078ba4eb8e2617653e9172388/miglayout-swing-4.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.eclipsesource.minimal-json/minimal-json/0.9.4/d6e7dd22569de97c2697a4af301a623f35028972/minimal-json-0.9.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jsoup/jsoup/1.13.1/f9577f3732bb7caa4fee8aba5053158f4010c118/jsoup-1.13.1.jar:$APP_HOME/lib/opencv_440.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/oro/oro/2.0.8/5592374f834645c4ae250f4c9fbb314c9369d698/oro-2.0.8.jar:$APP_HOME/lib/percentlayout.jar:$APP_HOME/lib/PSEngine.jar:$APP_HOME/lib/PSEngine-javadoc.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fifesoft/languagesupport/2.5.8/c55da0974b26b71accb6892b1010c67a61091138/languagesupport-2.5.8.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.mozilla/rhino/1.7.6/a2ce88a3ce55249cd2f0c7d12ce7ef49c14a11d1/rhino-1.7.6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fifesoft/autocomplete/2.5.8/17cfa2cb327dd149c88c93c2b5ff819309cdf446/autocomplete-2.5.8.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fifesoft/rsyntaxtextarea/2.5.8/7e7dfa44d9d9703c827b8f891339150919c2d7fe/rsyntaxtextarea-2.5.8.jar:$APP_HOME/lib/RXTXcomm.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.sanselan/sanselan/0.97-incubator/8396778b076a2eaf62024b64f6d924e4e0095fca/sanselan-0.97-incubator.jar:$APP_HOME/lib/sqlitejdbc-v056.jar:$APP_HOME/lib/standby.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.swinglabs.swingx/swingx-all/1.6.4/c0d8a3265d194cc886bafd585117b6465fd97dce/swingx-all-1.6.4.jar:$APP_HOME/lib/speech/cmudict04.jar:$APP_HOME/lib/speech/cmu_time_awb.jar:$APP_HOME/lib/speech/cmu_us_kal.jar:$APP_HOME/lib/speech/freetts.jar:$APP_HOME/lib/speech/cmulex.jar:$APP_HOME/lib/speech/cmutimelex.jar:$APP_HOME/lib/speech/en_us.jar:$APP_HOME/lib/speech/jsapi.jar:$APP_HOME/lib/vtk.jar:$APP_HOME/lib/wms.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xom/xom/1.0/ea0a26cf7925d47012a08f43a0b485ac23a81629/xom-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xerces/xercesImpl/2.7.1/815d652b79b71b7c82a71126d3d7ce8fc8bccdef/xercesImpl-2.7.1.jar:$APP_HOME/lib/xchart-3.5.1.jar:$APP_HOME/lib/xj3d/xj3d-all.jar:$APP_HOME/lib/xj3d/FastInfoset.jar:$APP_HOME/lib/xj3d/aviatrix3d-all.jar:$APP_HOME/lib/xj3d/dis.jar:$APP_HOME/lib/xj3d/disxml.jar:$APP_HOME/lib/xj3d/geoapi.jar:$APP_HOME/lib/xj3d/j3d-org.jar:$APP_HOME/lib/xj3d/jutils.jar:$APP_HOME/lib/xj3d/uri.jar:$APP_HOME/lib/xj3d/vlc_uri.jar:$APP_HOME/lib/xj3d/xj3d-cefx3d.jar:$APP_HOME/lib/xj3d/xj3d-common.jar:$APP_HOME/lib/xj3d/xj3d-config.jar:$APP_HOME/lib/xj3d/xj3d-core.jar:$APP_HOME/lib/xj3d/xj3d-eai.jar:$APP_HOME/lib/xj3d/xj3d-ecmascript.jar:$APP_HOME/lib/xj3d/xj3d-external-sai.jar:$APP_HOME/lib/xj3d/xj3d-images.jar:$APP_HOME/lib/xj3d/xj3d-j3d.jar:$APP_HOME/lib/xj3d/xj3d-java-sai.jar:$APP_HOME/lib/xj3d/xj3d-jaxp.jar:$APP_HOME/lib/xj3d/xj3d-jsai.jar:$APP_HOME/lib/xj3d/xj3d-net.jar:$APP_HOME/lib/xj3d/xj3d-norender.jar:$APP_HOME/lib/xj3d/xj3d-ogl.jar:$APP_HOME/lib/xj3d/xj3d-parser.jar:$APP_HOME/lib/xj3d/xj3d-render.jar:$APP_HOME/lib/xj3d/xj3d-runtime.jar:$APP_HOME/lib/xj3d/xj3d-sai.jar:$APP_HOME/lib/xj3d/xj3d-sav.jar:$APP_HOME/lib/xj3d/xj3d-script-base.jar:$APP_HOME/lib/xj3d/xj3d-xml-util.jar:$APP_HOME/lib/xj3d/xj3d-xml.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.adobe.xmp/xmpcore/5.1.3/57e70c3b10ff269fff9adfa7a31d61af0df30757/xmpcore-5.1.3.jar:$APP_HOME/lib/xuggle-xuggler-5.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.zxing/javase/3.2.1/78e98099b87b4737203af1fcfb514954c4f479d9/javase-3.2.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.annotation/javax.annotation-api/1.3.2/934c04d3cfef185a8008e7bf34331b79730a9d43/javax.annotation-api-1.3.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dk.dma.enav/enav-model/0.6/45749f79541839d461cf1e2b24a972f4e05bfacb/enav-model-0.6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.locationtech.jts/jts-core/1.16.0/dd852eb51b92eec108415c0ce624a65d99d0daae/jts-core-1.16.0.jar:$APP_HOME/plugins-dev/imc-groovy/lib/imc_plan_dsl-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.locationtech.proj4j/proj4j/1.1.1/a56d3151af9d5f5e909c456f89998ccdb48811a7/proj4j-1.1.1.jar:$APP_HOME/plugins-dev/necsave/lib/NMPJava.jar:$APP_HOME/plugins-dev/odss/lib/protobuf.jar:$APP_HOME/plugins-dev/odss/lib/rabbitmq-client.jar:$APP_HOME/plugins-dev/s57/lib/s57-package-2.4.4.jar:$APP_HOME/plugins-dev/shapefiles/lib/shapefilereader-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jakarta.xml.ws/jakarta.xml.ws-api/2.3.3/529fe0136be92861e5a255fbc99146f1943c4332/jakarta.xml.ws-api-2.3.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jakarta.jws/jakarta.jws-api/2.1.0/7d283ef13e49c1422701e30639371edca788c609/jakarta.jws-api-2.1.0.jar:$APP_HOME/plugins-dev/uav-parameters/lib/mavlink.jar:$APP_HOME/plugins-dev/vrp/lib/or124.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-transcoder/1.7/aa2eb6300cb50bbb9dbf52daf7d625aa0df1d930/batik-transcoder-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-extension/1.7/8e810d9ce0499beca541e3b1a144557cf06f8b19/batik-extension-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-gvt/1.7/3d315e60d72c761c52946b4acaa4b86239ef938/batik-gvt-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-script/1.7/4ea7906724bfefc1fca3e5b28229a458523e1fbf/batik-script-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-bridge/1.7/8e0cde3830e0f17704cd392b0a09b13944987a51/batik-bridge-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-anim/1.7/a45dd2ff8e4ecd56a4fc64dc668b53bee90bf601/batik-anim-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-svg-dom/1.7/5b3b1fea480fabbd3e0c44540af25b9fda0587ae/batik-svg-dom-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-parser/1.7/5d756cc4f6bf891793e6c7590773859c33a8609f/batik-parser-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-svggen/1.7/baa58d0f5bfd2a28142e222cee126eb71bd0a938/batik-svggen-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-awt-util/1.7/67605a29d49bf33f3c1d7832f490b0a007e7a6e2/batik-awt-util-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-dom/1.7/710d559bd1df52581b57b75a99ed5fd2e2918bb7/batik-dom-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-css/1.7/e6bb5c85753331534593f33fb9236acb41a0ab79/batik-css-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-xml/1.7/17e3da8bd9d4a131350a7835f5cc0d93ba199c89/batik-xml-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-util/1.7/5c4dd0dd9a86a2fba2c6ea26fb62b32b21b2a61e/batik-util-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.mail/mail/1.4.5/85319c87280f30e1afc54c355f91f44741beac49/mail-1.4.5.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.sun.xml.bind/jaxb-xjc/2.2/a2c1f445e24b9aa4ad2ae499c246bfdc07e5ad79/jaxb-xjc-2.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.sun.xml.bind/jaxb-impl/2.2/43b5ca50bcae275910515749dfc302a679a89714/jaxb-impl-2.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.xml.bind/jaxb-api/2.2/bcf23b1d858c6f69d67c851d497984d25345d0b1/jaxb-api-2.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.activation/activation/1.1.1/485de3a253e23f645037828c07f1d7f1af40763a/activation-1.1.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-ext/1.7/4784302b44a0336166fef6153a5e3d73e861aecc/batik-ext-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xalan/xalan/2.6.0/5b010b70e16d540dcb737caa09da1034ea721704/xalan-2.6.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.xmlgraphics/batik-js/1.7/688eb1bf13b7a54491fcb3405068fc5092589884/batik-js-1.7.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jdom/jdom/1.0/a2ac1cd690ab4c80defe7f9bce14d35934c35cec/jdom-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-databind/2.10.0/1127c9cf62f2bb3121a3a2a0a1351d251a602117/jackson-databind-2.10.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.avalon.framework/avalon-framework-api/4.3.1/2dacadeb49bc14420990b1f28897d46f96e2181d/avalon-framework-api-4.3.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.graphstream/gs-core/1.3/1199c349ae387742426ee216bcebcc0b5a51b2fa/gs-core-1.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.scala-lang/scala-library/2.10.1/ed3e1a6b0615dea666a7eaf753b03030f3f889/scala-library-2.10.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-core/2.10.0/4e2c5fa04648ec9772c63e2101c53af6504e624e/jackson-core-2.10.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-annotations/2.10.0/e01cfd93b80d6773b3f757c78e756c9755b47b81/jackson-annotations-2.10.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.httpcomponents/httpcore/4.4.11/de748cf874e4e193b42eceea9fe5574fabb9d4df/httpcore-4.4.11.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/bouncycastle/bcmail-jdk14/138/14ff2dfec8578f5f6838c4d6a77a86789afe5382/bcmail-jdk14-138.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/bouncycastle/bcprov-jdk14/138/de366c3243a586eb3c0e2bcde1ed9bb1bfb985ff/bcprov-jdk14-138.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xmlunit/xmlunit/1.2/9a8543988f6a1a1e584ae7bef34fd88825c54e1e/xmlunit-1.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.mortbay.jetty/jetty-util/6.0.2/c5b6dbcc84804e144535dd6a9fd21214368c815d/jetty-util-6.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.mortbay.jetty/servlet-api-2.5/6.0.2/8551dbd51502bef04dd534c37dae68e7e35b1a56/servlet-api-2.5-6.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.jgoodies/jgoodies-common/1.6.0/616b4463b8c33b951f33ae903821837d00717ec7/jgoodies-common-1.6.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/390c6a5fe3e5ea915412d6b9ea559bf781264b1f/jogl-all-2.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/9cf239d03ef5ab12387f9df5018bed0fbca5845d/jogl-all-2.0.2-natives-android-armv6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/d73bf60cd51bdc5e4b856c9c754af153862174f8/jogl-all-2.0.2-natives-linux-amd64.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/2195ae7ad5ba8c2cfeec86260ffef700fa0e84dc/jogl-all-2.0.2-natives-linux-armv6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/2cc28c7a62d5f778655c9eab6e41ced1bb6b4547/jogl-all-2.0.2-natives-linux-armv6hf.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/2ef854a67c9016ab5b43620db0cc418ccaf342e8/jogl-all-2.0.2-natives-linux-i586.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/7de4fb110a95f67c1cc1e122d508cd63e137e2eb/jogl-all-2.0.2-natives-macosx-universal.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/2f8de127ecb252499b845387447a5d5ddddb8a7c/jogl-all-2.0.2-natives-solaris-amd64.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/9760026e5e38e7a131c944e26a760489357b07a/jogl-all-2.0.2-natives-solaris-i586.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/1c10f18e3b1d42dd76d0939806d397fc6aa66534/jogl-all-2.0.2-natives-windows-amd64.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jogamp.jogl/jogl-all/2.0.2/78e28ecac4511aa0b144633bef998a110430b9ed/jogl-all-2.0.2-natives-windows-i586.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.sourceforge.collections/collections-generic/4.01/12dddecd8e8c24f5c9453a6d3ecb13b38e59db52/collections-generic-4.01.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/colt/colt/1.2.0/abc984f3adc760684d49e0f11ddf167ba516d4f/colt-1.2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.miglayout/miglayout-core/4.2/70f2bfa2a077ee1632cc8229deffa1d942825c78/miglayout-core-4.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/edu.ucar/udunits/5.2.0/f5f7d9966047b29b36e97b6b75f8886308715307/udunits-5.2.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/joda-time/joda-time/2.10.3/2e5366cf1f77ca3bafffecf6e87d30e1d504e959/joda-time-2.10.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.jdom/jdom2/2.0.6/6f14738ec2e9dd0011e343717fa624a10f8aab64/jdom2-2.0.6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/jsr305/3.0.2/25ea2e8b0c338a877313bd4672d3fe056ea78f0d/jsr305-3.0.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.protobuf/protobuf-java/3.9.1/3b4d448bd1e12b25727efea58e9e1a79c3dc29bd/protobuf-java-3.9.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.beust/jcommander/1.78/a3927de9bd6f351429bcf763712c9890629d8f51/jcommander-1.78.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.re2j/re2j/1.3/dc7de2b32fa8cc569ab44fb849abadbbc6983b91/re2j-1.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/1.7.28/2cd9b264f76e3d087ee21bfc99305928e1bdb443/slf4j-api-1.7.28.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.code.findbugs/annotations/2.0.1/9ef6656259841cebfb9fb0697bb122ada4485498/annotations-2.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.zxing/core/3.2.1/2287494d4f5f9f3a9a2bb6980e3f32053721b315/core-3.2.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dk.dma.enav/enav-util/0.6/8c5264f934612e4c9880cce156a558c9e6a8421d/enav-util-0.6.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/net.jcip/jcip-annotations/1.0/afba4942caaeaf46aab0b976afd57cc7c181467e/jcip-annotations-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/dk.dma.commons/dma-commons-management/0.5/10c9d753abb34e9b5e2811b96327f8727fae3bf/dma-commons-management-0.5.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.jidesoft/jide-oss/2.4.8/ed1762d38c2dfcda1ee173b550cd63da593813cb/jide-oss-2.4.8.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jakarta.xml.bind/jakarta.xml.bind-api/2.3.3/48e3b9cfc10752fba3521d6511f4165bea951801/jakarta.xml.bind-api-2.3.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jakarta.xml.soap/jakarta.xml.soap-api/1.4.2/4f71fa8ca30be4d04ba658339df3c927fa21209a/jakarta.xml.soap-api-1.4.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xerces/xmlParserAPIs/2.6.2/65acede1e5305bd2b92213d7b5761328c6f4fd9/xmlParserAPIs-2.6.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.ibm.icu/icu4j/2.6.1/ec0b2437fa48825d7b046efafbe8d27343fe97b2/icu4j-2.6.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/xml-apis/xml-apis-ext/1.3.04/41a8b86b358e87f3f13cf46069721719105aff66/xml-apis-ext-1.3.04.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.graphstream/pherd/1.0/def146e11a24b48f88e8af5fa14ca383f8ee4dd2/pherd-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.graphstream/mbox2/1.0/c20049788c1bde824e17cd8e26c2f515a1eab352/mbox2-1.0.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-math/2.1/b3c4bdc2778ddccceb8da2acec3e37bfa41303e9/commons-math-2.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.apache.commons/commons-math3/3.4.1/3ac44a8664228384bc68437264cf7c4cf112f579/commons-math3-3.4.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/concurrent/concurrent/1.3.4/1cf394c2a388199db550cda311174a4c6a7d117c/concurrent-1.3.4.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.guava/failureaccess/1.0.1/1dcf1de382a0bf95a3d8b0849546c88bac1292c9/failureaccess-1.0.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/b421526c5f297295adef1c886e5246c39d4ac629/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.checkerframework/checker-qual/2.8.1/eb2e8ab75598548cc8acf9a1ca227e480e01881e/checker-qual-2.8.1.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.errorprone/error_prone_annotations/2.3.2/d1a0c5032570e0f64be6b4d9c90cdeb103129029/error_prone_annotations-2.3.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/com.google.j2objc/j2objc-annotations/1.3/ba035118bc8bac37d7eff77700720999acd9986d/j2objc-annotations-1.3.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/org.codehaus.mojo/animal-sniffer-annotations/1.17/f97ce6decaea32b36101e37979f8b647f00681fb/animal-sniffer-annotations-1.17.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/jakarta.activation/jakarta.activation-api/1.2.2/99f53adba383cb1bf7c3862844488574b559621f/jakarta.activation-api-1.2.2.jar:/home/lsts/.gradle/caches/modules-2/files-2.1/javax.xml.stream/stax-api/1.0-2/d6337b0de8b25e53e81b922352fbea9f9f57ba0b/stax-api-1.0-2.jar:$APP_HOME/plugins/*:$CLASSPATH"

WORKSPACE="pt.lsts.neptus.loader.NeptusMain ws"
VIEWER3D="pt.lsts.neptus.loader.Viewer3DLoader"
MRA="pt.lsts.neptus.loader.NeptusMain mra"
LAUVCONSOLE="pt.lsts.neptus.mc.lauvconsole.LAUVConsole"
WORLDMAPPANEL="pt.lsts.neptus.app.tiles.WorldMapPanel"

case $1 in
  "ws"       )  DEFAULT=$WORKSPACE
                shift;;
  "v3d"      )  DEFAULT=$VIEWER3D
                shift;;
  "mra"      )  DEFAULT=$MRA
                shift;;
  "la"       )  DEFAULT=$LAUVCONSOLE
                shift;;
  "wm"       )  DEFAULT=$WORLDMAPPANEL
                shift;;
  "run"      )  DEFAULT=
                shift;;
esac



LIB_JNI=".:libJNI"

if test -d "$APP_HOME/jre/bin"; then
  JAVA_BIN_FOLDER="$APP_HOME/jre/bin/";
else
  if [ -n "$JAVA_HOME" ] ; then
    JAVA_BIN_FOLDER="$JAVA_HOME/bin/";
  else
    JAVA_BIN_FOLDER="";
  fi
fi

JAVACMD=${JAVA_BIN_FOLDER}java
"$JAVACMD" -version 1>/dev/null 2>&1
if [ $? -ne 0 ] ; then
  echo "Java executable was not found for '$JAVACMD'"
  exit 1
fi

JAVA_MACHINE_TYPE=$("$JAVACMD" -classpath "$APP_HOME/bin/neptus.jar" pt.lsts.neptus.loader.helper.CheckJavaOSArch)
echo "Found machine type: $JAVA_MACHINE_TYPE"
if [[ ${JAVA_MACHINE_TYPE} == 'linux-x64' ]]; then
 LIB_JNI="$APP_HOME/.:$APP_HOME/libJNI/gdal/linux/x64:$APP_HOME/libJNI/x64:$APP_HOME/libJNI/europa/x64:$APP_HOME/libJNI/gdal/linux/x86:$APP_HOME/libJNI:/usr/lib/jni"
elif [[ ${JAVA_MACHINE_TYPE} == 'linux-x86' ]]; then
  LIB_JNI="$APP_HOME/.:$APP_HOME/libJNI/gdal/linux/x86:$APP_HOME/libJNI:/usr/lib/jni"
elif [[ ${JAVA_MACHINE_TYPE} == 'osx-x64' ]]; then
  LIB_JNI="$APP_HOME/.:$APP_HOME/libJNI/x64:$APP_HOME/libJNI/europa/x64:$APP_HOME/libJNI:/usr/lib/jni"
fi

if test -f /usr/lib/jni/libvtkCommonJava.so; then
  VTKPROP="-Dvtk.lib.dir=/usr/lib/jni"
elif test -f /usr/lib/vtk-5.10/libvtkCommonJava.so; then
  VTKPROP="-Dvtk.lib.dir=/usr/lib/vtk-5.10"
elif test -f /usr/lib/vtk-5.8/libvtkCommonJava.so; then
  VTKPROP="-Dvtk.lib.dir=/usr/lib/vtk-5.8"
else
  VTKPROP=
  echo "No VTK Java wrappers found"
fi

[[ -e "$APP_HOME/log/" ]] || mkdir "$APP_HOME/log"

# Escape application args
escapeArgs () {
    for i do printf %s\\n "$i" | sed "s/'/'\\\\''/g;1s/^/'/;\$s/\$/' \\\\/" ; done
    echo " "
}
APP_ARGS=$(escapeArgs "$@")

export LD_LIBRARY_PATH=$LIB_JNI:$LD_LIBRARY_PATH

# Collect all arguments for the java command, following the shell quoting and substitution rules
eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $NEPTUS_OPTS -Djava.library.path=$LIB_JNI $VTKPROP -classpath "\"$CLASSPATH\"" $DEFAULT "$APP_ARGS"

exec "$JAVACMD" "$@"
